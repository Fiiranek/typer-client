(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{21:function(e,t,n){e.exports={auth:"auth_auth__1Nbjn"}},23:function(e,t,n){e.exports={match:"typeTile_match__2hB7t",matchHeader:"typeTile_matchHeader__2_kYC"}},24:function(e,t,n){e.exports={match:"matchTile_match__3pQAr",matchHeader:"matchTile_matchHeader__3Ied_"}},27:function(e,t,n){e.exports={navbar:"navbar_navbar__3RyGg"}},31:function(e,t,n){e.exports={newMatch:"newMatch_newMatch__1SbVK"}},32:function(e,t,n){e.exports={matches:"types_matches__agqzE"}},33:function(e,t,n){e.exports={matches:"matches_matches__1lIF8"}},39:function(e,t,n){},40:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(19),r=n.n(s),i=(n(39),n(40),n(13)),o=n(7),l=n(3),h=n(4),u=n(8),j=n(6),d=n(5),b=n(27),m=n.n(b),f=n(30),p=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"getToken",value:function(){var e=localStorage.getItem("user_id");return e||!1}},{key:"setToken",value:function(e){localStorage.setItem("user_id",e)}},{key:"removeToken",value:function(){localStorage.removeItem("user_id")}},{key:"isAdmin",value:function(e){return!!["0a2c63e5-8f44-4ef4-9bb7-62216aca6298"].includes(e)}}]),e}(),O=n(1),g=Object(a.createContext)(),v=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={user_id:p.getToken(),isAdmin:p.isAdmin()},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(O.jsx)(g.Provider,{value:Object(f.a)({},this.state),children:this.props.children})}}]),n}(a.Component),y=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).logout=e.logout.bind(Object(u.a)(e)),e}return Object(h.a)(n,[{key:"logout",value:function(){p.removeToken(),window.location="/login"}},{key:"render",value:function(){return this.context.user_id?Object(O.jsxs)("div",{className:m.a.navbar,children:[Object(O.jsx)(i.b,{to:"/",children:"Home"}),Object(O.jsx)(i.b,{to:"/types",children:"Twoj typy"}),Object(O.jsx)(i.b,{to:"/matches",children:"Mecze"}),Object(O.jsx)(i.b,{to:"/table",children:"Tabela"}),Object(O.jsx)(i.b,{to:"/new-match",children:"Dodaj mecz"}),Object(O.jsx)(i.b,{to:"/matches",children:"Mecze"}),Object(O.jsx)("button",{onClick:this.logout,children:"Wyloguj"})]}):Object(O.jsxs)("div",{className:m.a.navbar,children:[Object(O.jsx)(i.b,{to:"/login",children:"Zaloguj"}),Object(O.jsx)(i.b,{to:"/register",children:"Stw\xf3rz konto"})]})}}]),n}(a.Component);y.contextType=g;var x=y,_=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return console.log(this.context),Object(O.jsx)("div",{children:Object(O.jsx)("h1",{children:"Home"})})}}]),n}(a.Component);_.contextType=g;var S=_,C=n(21),k=n.n(C),w=Object.freeze({SUCCESS:"SUCCESS",FAILURE:"FAILURE"}),R=Object.freeze({Turkey:"tr",Italy:"it",Wales:"",Switzerland:"ch"}),T=Object.keys(R).map((function(e){return e})),N=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).nickRef=Object(a.createRef)(),e.password1Ref=Object(a.createRef)(),e.password2Ref=Object(a.createRef)(),e.register=e.register.bind(Object(u.a)(e)),e}return Object(h.a)(n,[{key:"register",value:function(){var e=this.nickRef.current.value,t=this.password1Ref.current.value;this.password2Ref.current.value;console.log("register"),fetch("/register",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({nick:e,password:t})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.msg===w.SUCCESS&&alert("Registered!")}))}},{key:"render",value:function(){return Object(O.jsxs)("div",{className:k.a.auth,children:[Object(O.jsx)("input",{type:"text",placeholder:"Nick",ref:this.nickRef}),Object(O.jsx)("input",{type:"password",placeholder:"Has\u0142o",id:"password1",ref:this.password1Ref}),Object(O.jsx)("input",{type:"password",placeholder:"Powt\xf3rz has\u0142o",id:"password2",ref:this.password2Ref}),Object(O.jsx)("button",{onClick:this.register,children:"Zrejestruj"})]})}}]),n}(a.Component),D=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).nickRef=Object(a.createRef)(),e.passwordRef=Object(a.createRef)(),e.login=e.login.bind(Object(u.a)(e)),e}return Object(h.a)(n,[{key:"login",value:function(){var e=this.nickRef.current.value,t=this.passwordRef.current.value;fetch("/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({nick:e,password:t})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.msg===w.SUCCESS?(alert("Logged in!"),p.setToken(e.user_id),window.location.href="/types"):alert("Cannot log in!")}))}},{key:"render",value:function(){return this.context.user_id&&(window.location.href="/"),Object(O.jsxs)("div",{className:k.a.auth,children:[Object(O.jsx)("input",{type:"text",placeholder:"Nick",ref:this.nickRef}),Object(O.jsx)("input",{type:"password",placeholder:"Has\u0142o",id:"password",ref:this.passwordRef}),Object(O.jsx)("button",{onClick:this.login,children:"Zaloguj"})]})}}]),n}(a.Component);D.contextType=g;var M=D,P=(n(48),n(14)),E=n(31),H=n.n(E),U=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={team1:T[0],team2:T[1]},e.change=e.change.bind(Object(u.a)(e)),e}return Object(h.a)(n,[{key:"change",value:function(e){this.setState(Object(P.a)({},e.target.name,e.target.value))}},{key:"submit",value:function(e){e.preventDefault(),fetch("/new-match",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({team1:this.state.team1,team2:this.state.team2,date:this.state.date})}).then((function(e){return e.json()})).then((function(e){e.msg===w.SUCCESS?alert("Match added!"):alert("Could not add match!")}))}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("form",{className:H.a.newMatch,onSubmit:function(t){return e.submit(t)},children:[Object(O.jsx)("input",{type:"datetime-local",name:"date",id:"",required:!0,onChange:function(t){return e.change(t)}}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("select",{name:"team1",id:"",onChange:function(t){return e.change(t)},required:!0,children:[Object(O.jsx)("option",{value:"-",selected:!0,disabled:!0,hidden:!0,children:"-"}),T.map((function(e){return Object(O.jsx)("option",{value:e,children:e})}))]}),Object(O.jsx)("span",{children:" - "}),Object(O.jsxs)("select",{name:"team2",id:"",onChange:function(t){return e.change(t)},required:!0,children:[Object(O.jsx)("option",{value:"-",selected:!0,disabled:!0,hidden:!0,children:"-"}),T.map((function(e){return Object(O.jsx)("option",{value:e,children:e})}))]})]}),Object(O.jsx)("button",{type:"submit",children:"Dodaj"})]})}}]),n}(a.Component),I=n(15),J=n(32),z=n.n(J),A=n(23),Z=n.n(A),q=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).team1Ref=Object(a.createRef)(),c.team2Ref=Object(a.createRef)(),c.state={isChangeDisabled:!0,isType:!1,team1_goals:0,team2_goals:0},c.addTypeSelect=c.addTypeSelect.bind(Object(u.a)(c)),c.change=c.change.bind(Object(u.a)(c)),c}return Object(h.a)(n,[{key:"componentDidMount",value:function(e){var t=this;fetch("/type",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({user_id:this.context.user_id,match_id:this.props.match.match_id})}).then((function(e){return e.json()})).then((function(e){console.log("data",e);var n=e.filter((function(e){return e.date}))[0],a=e.filter((function(e){return e.type}))[0];if(n){var c=(new Date).getTime(),s=new Date(n.date).getTime()-c<36e5;a?t.setState({type_id:a.type.type_id,team1_goals:a.type.team1_goals,team2_goals:a.type.team2_goals,isType:!0,isChangeDisabled:s}):t.setState({isType:!1,isChangeDisabled:s})}}))}},{key:"change",value:function(e){var t=this;this.setState(Object(P.a)({},e.target.name,parseInt(e.target.value)),(function(){return console.log(t.state)}))}},{key:"addTypeSelect",value:function(e){var t=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{ref:this.team1Ref,onChange:function(e){return t.change(e)},name:"team1_goals",value:this.state.team1_goals,type:"number",min:0,max:100,readOnly:this.state.isChangeDisabled}),Object(O.jsx)("span",{children:"\xa0:\xa0"}),Object(O.jsx)("input",{ref:this.team2Ref,onChange:function(e){return t.change(e)},name:"team2_goals",value:this.state.team2_goals,type:"number",min:0,max:100,readOnly:this.state.isChangeDisabled}),Object(O.jsx)("button",{disabled:this.state.isChangeDisabled,onClick:function(){t.state.isChangeDisabled||fetch(t.state.isType?"/change-type":"/add-type",{method:"POST",headers:{"Content-type":"application/json"},body:t.state.isType?JSON.stringify({type_id:t.state.type_id,team1_goals:t.state.team1_goals,team2_goals:t.state.team2_goals}):JSON.stringify({user_id:t.context.user_id,match_id:t.props.match.match_id,team1_goals:t.state.team1_goals,team2_goals:t.state.team2_goals})}).then((function(e){return e.json()})).then((function(e){e.msg===w.SUCCESS&&alert("Changed type succesfuly!")}))},children:this.state.type_id?"Zmie\u0144":"Dodaj"})]})}},{key:"render",value:function(e){var t=this.props.match;return Object(O.jsxs)("div",{className:Z.a.match,children:[Object(O.jsxs)("div",{className:Z.a.matchHeader,children:[Object(O.jsx)("img",{src:"https://www.countryflags.io/".concat(R[t.team1],"/flat/32.png"),alt:""}),Object(O.jsx)("span",{children:"\xa0-\xa0"}),Object(O.jsx)("img",{src:"https://www.countryflags.io/".concat(R[t.team2],"/flat/32.png"),alt:""})]}),Object(O.jsxs)("div",{className:Z.a.matchHeader,children:[Object(O.jsxs)("span",{children:[t.team1," "]}),Object(O.jsx)("span",{children:"\xa0-\xa0"}),Object(O.jsxs)("span",{children:[" ",t.team2]})]}),Object(O.jsxs)("span",{children:["Data: ",t.date]}),Object(O.jsx)("span",{}),this.addTypeSelect()]})}}]),n}(a.Component);q.contextType=g;var F=q,L=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={matches:[]},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:5000/matches").then((function(e){return e.json()})).then((function(t){t.msg===w.SUCCESS?e.setState({matches:Object(I.a)(t.matches)}):alert("Could not get matches!")}))}},{key:"render",value:function(){return Object(O.jsx)("div",{className:z.a.matches,children:this.state.matches.map((function(e){return Object(O.jsx)(F,{match:e})}))})}}]),n}(a.Component);L.contextType=g;var B=L,W=n(33),G=n.n(W),K=n(24),Q=n.n(K),V=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this)).state={team1_goals:e.match.team1_goals,team2_goals:e.match.team2_goals},c.team1_goalsRef=Object(a.createRef)(),c.team2_goalsRef=Object(a.createRef)(),c.changeScoreSelect=c.changeScoreSelect.bind(Object(u.a)(c)),c.change=c.change.bind(Object(u.a)(c)),c}return Object(h.a)(n,[{key:"changeScoreSelect",value:function(e){var t=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{ref:this.team1_goalsRef,onChange:function(e){return t.change(e)},name:"team1_goals",value:this.state.team1_goals,type:"number",min:-1,max:100}),Object(O.jsx)("span",{children:"\xa0:\xa0"}),Object(O.jsx)("input",{ref:this.team2_goalsRef,onChange:function(e){return t.change(e)},name:"team2_goals",value:this.state.team2_goals,type:"number",min:-1,max:100}),Object(O.jsx)("button",{disabled:this.state.isChangeDisabled,onClick:function(){t.state.team1_goals>=0&&t.state.team2_goals?fetch("/match",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({match_id:t.props.match.match_id,team1_goals:t.state.team1_goals,team2_goals:t.state.team2_goals})}).then((function(e){return e.json()})).then((function(e){e.msg===w.SUCCESS&&alert("Changed match score succesfuly!")})):alert("Score must be 0:0 or bigger")},children:"Zmie\u0144"})]})}},{key:"change",value:function(e){var t=this;this.setState(Object(P.a)({},e.target.name,parseInt(e.target.value)),(function(){return console.log(t.state)}))}},{key:"render",value:function(e){var t=this.props.match;return Object(O.jsxs)("div",{className:Q.a.match,children:[Object(O.jsxs)("div",{className:Q.a.matchHeader,children:[Object(O.jsx)("img",{src:"https://www.countryflags.io/".concat(R[t.team1],"/flat/32.png"),alt:""}),Object(O.jsx)("span",{children:"\xa0-\xa0"}),Object(O.jsx)("img",{src:"https://www.countryflags.io/".concat(R[t.team2],"/flat/32.png"),alt:""})]}),Object(O.jsxs)("div",{className:Q.a.matchHeader,children:[Object(O.jsxs)("span",{children:[t.team1," "]}),Object(O.jsx)("span",{children:"\xa0-\xa0"}),Object(O.jsxs)("span",{children:[" ",t.team2]})]}),Object(O.jsxs)("span",{children:["Data: ",t.date]}),this.changeScoreSelect(),Object(O.jsx)("button",{onClick:function(){fetch("/delete-match",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({match_id:t.match_id})}).then((function(e){return e.json()})).then((function(e){window.location.reload()}))},children:"Usu\u0144"})]})}}]),n}(a.Component),Y=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={matches:[]},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:5000/matches").then((function(e){return e.json()})).then((function(t){t.msg===w.SUCCESS?e.setState({matches:Object(I.a)(t.matches)}):alert("Could not get matches!")}))}},{key:"render",value:function(){return Object(O.jsx)("div",{className:G.a.matches,children:this.state.matches.map((function(e){return Object(O.jsx)(V,{match:e})}))})}}]),n}(a.Component),X=(n(47),n(34)),$=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).calculatePoints=e.calculatePoints.bind(Object(u.a)(e)),e}return Object(h.a)(n,[{key:"calculatePoints",value:function(e){var t,n=this,a=0,c=this.props.types.filter((function(e){return e.user_id===n.props.user.user_id})),s=Object(X.a)(c);try{var r=function(){var e=t.value,c=n.props.matches.filter((function(t){return t.match_id===e.match_id}))[0],s=Math.abs(e.team1_goals-e.team2_goals)==Math.abs(c.team1_goals-c.team2_goals),r=c.team1_goals>c.team2_goals&&e.team1_goals>e.team2_goals||c.team1_goals<c.team2_goals&&e.team1_goals<e.team2_goals;e.team1_goals==c.team1_goals&&e.team2_goals==c.team2_goals?a+=3:s?a+=2:r&&(a+=1)};for(s.s();!(t=s.n()).done;)r()}catch(i){s.e(i)}finally{s.f()}return a}},{key:"render",value:function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:this.props.user.nick}),Object(O.jsx)("td",{children:this.calculatePoints()})]})}}]),n}(a.Component),ee=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={matches:[],users:[],types:[]},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/table").then((function(e){return e.json()})).then((function(t){var n=t.filter((function(e){return e.users}))[0],a=t.filter((function(e){return e.matches}))[0],c=t.filter((function(e){return e.types}))[0];n&&a&&c&&e.setState({matches:Object(I.a)(a.matches),users:Object(I.a)(n.users),types:Object(I.a)(c.types)})}))}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("table",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Nick"}),Object(O.jsx)("th",{children:"Punkty"})]}),this.state.users.map((function(t){return Object(O.jsx)($,{user:t,matches:e.state.matches,types:e.state.types})}))]})}}]),n}(a.Component);var te=function(){return Object(O.jsx)(v,{children:Object(O.jsx)(i.a,{children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(x,{}),Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{path:"/table",component:function(){return Object(O.jsx)(ee,{})}}),Object(O.jsx)(o.a,{path:"/matches",component:function(){return Object(O.jsx)(Y,{})}}),Object(O.jsx)(o.a,{path:"/types",component:function(){return Object(O.jsx)(B,{})}}),Object(O.jsx)(o.a,{path:"/new-match",component:function(){return Object(O.jsx)(U,{})}}),Object(O.jsx)(o.a,{path:"/register",component:function(){return Object(O.jsx)(N,{})}}),Object(O.jsx)(o.a,{path:"/login",component:function(){return Object(O.jsx)(M,{})}}),Object(O.jsx)(o.a,{path:"/",component:function(){return Object(O.jsx)(S,{})}})]})]})})})};r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(te,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.ca360e63.chunk.js.map